# NSFK? プロトタイプ検証計画書

## プロトタイプ目的
最小限の機能でNSFK?の核となる動画安全性分析機能を検証し、技術的実現可能性とユーザビリティを確認する。

## 検証スコープ（最小限）

### 含める機能
- ✅ YouTube動画URL入力
- ✅ 基本的な映像・音声分析
- ✅ 簡単な安全性スコア生成
- ✅ 結果表示（コンソール/ファイル出力）

### 除外する機能（本格版で実装）
- ❌ Chrome Extension
- ❌ コメント分析
- ❌ Reddit/Wiki関連データ
- ❌ リアルタイムUI
- ❌ 複雑なスコアリングアルゴリズム

## プロトタイプ実装計画（3日間）

### Day 1: コア機能実装
**時間**: 6-8時間
- [ ] Reference.mdのサンプルコードベースで環境構築
- [ ] YouTube動画ダウンロード機能（yt-dlp）
- [ ] シーン検出・映像分析（PySceneDetect + GPT-4o-mini）
- [ ] 音声文字起こし（Whisper）

### Day 2: 安全性分析機能
**時間**: 4-6時間
- [ ] 安全性特化のプロンプト設計
- [ ] 基本スコアリングロジック（0-100点）
- [ ] キーワード抽出機能
- [ ] 結果出力フォーマット統一

### Day 3: 統合・テスト・改善
**時間**: 4-6時間
- [ ] 全体統合とエラーハンドリング
- [ ] サンプル動画でのテスト実行
- [ ] 結果精度の確認・調整
- [ ] 最終動作確認

## 技術仕様（簡素版）

### ファイル構成
```
prototype/
├── main.py              # メイン実行ファイル
├── video_analyzer.py    # 動画分析クラス
├── safety_scorer.py     # 安全性スコアリング
├── requirements.txt     # 依存関係
├── config.py           # 設定ファイル
└── results/            # 結果出力フォルダ
```

### 分析パラメータ
```python
# シンプル設定
SCENE_THRESHOLD = 60.0
MAX_SCENES = 20  # プロトタイプでは制限
WHISPER_MODEL = "base"  # 速度重視
GPT_MODEL = "gpt-4o-mini"
MAX_TOKENS = 5000  # コスト節約
```

### 出力フォーマット（簡素版）
```json
{
  "video_url": "https://youtube.com/watch?v=...",
  "duration": "5:23",
  "safety_score": 75,
  "summary": "教育的なコンテンツで、子供にも安全",
  "risk_factors": ["軽微な暴力表現"],
  "keywords": ["教育", "科学", "実験"],
  "recommendation": "推奨",
  "processing_time": "45秒"
}
```

## 検証項目

### 技術検証
- [ ] YouTube動画のダウンロード成功率
- [ ] 分析処理速度（目標: 動画時間の1.5倍以内）
- [ ] GPT-4o-miniの分析精度
- [ ] エラーハンドリングの適切性

### 機能検証
- [ ] 様々なタイプの動画での動作確認
  - 教育系動画
  - エンターテイメント
  - ゲーム実況
  - 子供向けコンテンツ
- [ ] 安全性スコアの妥当性
- [ ] 処理コストの測定

### ユーザビリティ検証
- [ ] コマンドライン操作の簡便性
- [ ] 結果の理解しやすさ
- [ ] エラー時の分かりやすさ

## 成功基準

### 必須基準
- ✅ 5分以内の動画を10分以内で分析完了
- ✅ 安全性スコアが直感的に理解できる
- ✅ 90%以上の動画で正常に処理完了
- ✅ 処理コストが1動画あたり$0.50以下

### 望ましい基準
- 🎯 3分以内の動画を5分以内で分析完了
- 🎯 結果の妥当性が主観的に80%以上
- 🎯 処理コストが1動画あたり$0.20以下

## リスク対応

### 技術リスク
**問題**: OpenAI API制限・コスト超過
**対策**: トークン数制限、バックアップ手動テスト

**問題**: 動画ダウンロード失敗
**対策**: 複数のyt-dlp設定、フォールバック処理

**問題**: 処理時間過多
**対策**: シーン数制限、並列処理検討

### 検証リスク
**問題**: サンプル動画不足
**対策**: 多様なジャンルの動画リスト事前準備

**問題**: 安全性判定の主観性
**対策**: 複数人でのレビュー、定量的指標併用

## 次ステップ（プロトタイプ後）

### 技術評価結果を基に決定
1. **成功時**: Chrome Extension開発開始
2. **部分成功時**: 技術課題の解決方針決定
3. **失敗時**: アプローチの根本的見直し

### データ収集・分析
- 処理時間・コストの詳細データ
- 精度改善のためのフィードバック
- ユーザビリティ改善点の洗い出し

### 技術的改善案
- GPU対応によるWhisper高速化
- 並列処理によるシーン分析効率化
- プロンプトエンジニアリングによる精度向上

## 実装優先順位

### 必須（MVP）
1. 動画ダウンロード・シーン検出
2. GPT-4o-miniによる映像分析
3. Whisperによる音声分析
4. 基本的な安全性スコア算出

### 重要（検証精度向上）
5. エラーハンドリング
6. 結果出力の整理
7. 設定ファイルによるパラメータ調整

### あると良い（ユーザビリティ）
8. 進捗表示
9. ログ出力
10. 結果のHTML出力

## 検証完了の定義
- 5つの異なるタイプの動画で正常に分析完了
- 各動画の結果が主観的に妥当
- 処理時間・コストが基準内
- エラーが発生した場合の適切な処理
- 最終報告書（検証結果・改善案）の作成完了